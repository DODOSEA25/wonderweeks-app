<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>아기 성장 캘린더</title>

  <!-- AdSense 스크립트 한 번만 -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2903492342387009" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="style.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.7/index.global.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.7/index.global.min.js"></script>

  <style>
    /* 모달 */
    #eventModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:1001;justify-content:center;align-items:center}
    #eventModal .box{background:#fff;border-radius:8px;padding:1.5rem;width:320px;max-width:90%}
    #eventModal .close{position:absolute;right:.75rem;top:.5rem;cursor:pointer;font-size:1.2rem}

    /* 광고 팝업 */
    #ad-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:1000;justify-content:center;align-items:center}
    #ad-popup{background:#fff;border-radius:8px;padding:1rem;position:relative}
    #ad-popup-close{position:absolute;top:.4rem;right:.5rem;cursor:pointer;font-size:1.2rem}
  </style>
</head>
<body>
  <!-- 상단 배너 -->
  <header class="ad-banner">
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2903492342387009" data-ad-slot="1171436236" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </header>

  <div class="container result">
    <h1>아기 성장 캘린더</h1>
    <div class="input-group">
      <input id="newBirth" placeholder="YYYY-MM-DD" readonly/>
      <button id="recalc">🔄 재계산</button>
      <button id="home">🏠 홈</button>
    </div>
    <p id="ageInfo"></p>
    <p id="statusInfo" class="status"></p>
    <p id="tipInfo" class="tip"></p>
    <div id="calendars"></div>
    <p id="nextEvent"></p>
  </div>

  <!-- 상세 모달 -->
  <div id="eventModal"><div class="box">
    <span class="close" id="closeModal">&times;</span>
    <h2 id="mTitle"></h2>
    <p id="mStatus"></p>
    <p id="mTip"></p>
    <p id="mExample"></p>
  </div></div>

  <!-- 광고 팝업(300x250 고정) -->
  <div id="ad-overlay">
    <div id="ad-popup">
      <span id="ad-popup-close">&times;</span>
      <ins class="adsbygoogle" style="display:block;width:300px;height:250px" data-ad-client="ca-pub-2903492342387009" data-ad-slot="5775002015"></ins>
    </div>
  </div>

  <!-- 하단 배너 -->
  <footer class="ad-banner">
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2903492342387009" data-ad-slot="7893898897" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </footer>

  <!-- 앱 로직 -->
  <script src="script.js"></script>

  <script>
    /* 광고 팝업: 10초 후 표시 & 그때 push() */
    setTimeout(()=>{
      document.getElementById('ad-overlay').style.display='flex';
      try{(adsbygoogle=window.adsbygoogle||[]).push({});}catch(e){console.warn(e);}
    },10000);
    document.getElementById('ad-popup-close').onclick=()=>document.getElementById('ad-overlay').style.display='none';

    /* 모달 닫기 */
    document.getElementById('closeModal').onclick=()=>document.getElementById('eventModal').style.display='none';
    document.getElementById('eventModal').onclick=e=>{if(e.target.id==='eventModal')e.target.style.display='none';};

    /* 네비게이션 */
    document.getElementById('home').onclick=()=>location.href='index.html';

    /* 입력 세팅 & 즉시 렌더 */
    const params=new URLSearchParams(location.search);
    const b=params.get('b'); if(b)document.getElementById('newBirth').value=b;
    document.getElementById('recalc').onclick=()=>{
      const d=document.getElementById('newBirth').value;
      if(d) { location.search='?b='+d; }        /* 페이지 자체 리로드 한 번만 */
    };

    /* 최초 한 번 script.js 의 renderAll 호출 */
    if(window.renderAll) renderAll();
  </script>
</body>
</html>
